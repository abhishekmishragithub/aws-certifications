### AMI

- キーペア設定は引き継がれない
- プライベートを保ちつつAWSアカウント番号を指定して他のアカウントに公開することが可能

### EC2 Image Builder

- ECS用のdocker imageも指定できる
- ビルドコンポーネントで更新する対象を選択する

ストレージは以下の３タイプがある

ブロックストレージ　（EBS、インスタンスストア）
オブジェクトストレージ　（S3,Glacier）
ファイルストレージ　（EFS）

### EBS

- 1GB-16TB
- 全ポートを閉じていてもEBSは例外的に使える
- EBSを複数のインスタンスで共有することはできない
- プロビジョンドIOPSからは複数インスタンスで共有可能になった
- 同じAZならインスタンスの付け替え可能
- スナップショットはS3に保存される
- バックアップ中も非推奨ではあるが、ダウンタイムなしで利用可能
- スナップショットは別AWSアカウントに共有可能
- AMIのスナップショットはEBSのスナップショットを含む
- rootボリュームはデタッチできない（インスタンス停止してから強制デタッチ）

ボリュームタイプ

- SSD
   - 汎用SSD　
   - プロビジョンドIOPS　性能高い
- HDD
   - スループット最適化　ビッグデータ処理、バックアップやアーカイブ
   - コールドHDD　アクセス頻度が低いデータ
- マグネティックタイプは古く、使わない

DLM（データライフサイクルマネージャー）という機能でスナップショットのスケジューリングが可能

- Cloudwatchでスケジュール可能

### プレイスメントグループ

複数のインスタンスを論理的にグループ化して、耐障害性を高める機能

- 全てのファミリーが使えない。tなど不可
- クラスタープレイスメントグループ パフォーマンスを高める目的　別ピアVPC、単一AZ内をグループ可
- パーティションプレイスメントグループ　耐障害目的　パーティション分けてそれぞれ複数インスタンス入れる。パーティション同士は物理的なラックを共有しない
- スプレッドプレイスメントグループ　耐障害目的　パーティションに１インスタンス
- 既に起動されたインスタンスを入れるうことは不可

コンバーチブルはファミリー変更が可能で、スタンダードは不可。サイズは両方可能？
ハードウェア専有ホストは同アカウント内でハードウェアが共有される可能性があり、部署違いでも禁止している場合は不適切になる。Dedicated Hostならば完全に１つを専有することが保証される

セキュリティグループ

- デフォルトは全てのインバウンドは同じセキュリティグループに割り当てられたインスタンスからのインバウンドトラフィックのみ許可されており、そのほかの全てのインバウンドを拒否に設定しています。

EBS ボリュームのポイントインタイムスナップショットを作成して、新規ボリュームやデータバックアップ用のベースラインとして使用することができます。ボリュームのスナップショットを定期的に作成する場合、スナップショットは増分です。新しいスナップショットは、最後のスナップショット以降に変更されたブロックのみを保存します。

### S3

- 複数AZでマネージドで冗長化される
- バケットの名前はグローバルでユニークである必要がある
- バケット内オブジェクト数は無制限
- データサイズは0KBから5TBまで

オブジェクト構成要素

- Key
- Value バイト値。データそのもの
- バージョンID
- メタデータ
- サブリソース　ACLなど
- イレブンナインの耐久性

ストレージサービス

- standard
- standard ia 保管が安価で読み出しに応じた課金
- one zone-ia 99.5%の可用性
- RRS 非推奨
- Amazon Glacier　データ抽出に３，５時間かかる

- S3 Intelligent-Tiering 自動的にデータを低頻度アクセス層に移動する

料金

- 容量、リクエスト数（PUT, COPY, POST, LIST）データ転送アウトにかかる。インは無料

- 結果整合性を採用（新規登録は即時反映、更新と削除の反映に時間がかかる）

アクセス管理

- IAM
- バケットポリシー
- ACL
- 署名付きURL

暗号化

- SSE-SE　S3のデフォルト
- SSE-KMS ユーザー側がキー管理可能
- SSE-C　ユーザー指定の独自のキーを独自の使い方？
- クライアントサイド暗号化(CSE)　暗号化したデータをS3に送る

アクセスポイント

- IP制限設定
- VPC制限

S3アクセスアナライザー

- 可視化、不正検知

ライフサイクル管理

- s3をglacierに移行したりすることの自動化

レプリケーション

- クロスリージョンレプリケーションにより耐障害性を高める
- 双方向レプリケーションにのみ双方からの削除時に同期が走る

バックアップ

- アーカイブ
- 双方向レプリケーションにのみ双方からの削除時に同期が走る

