### S3 Glacier

- アーカイブに保存される
- 最大サイズは４０TB、S3は５TB
- データの更新は不可
- アーカイブをボールドの中に保存する。ボールド(バケット相当)はアカウントにつき１０００個
- アーカイブへの保存が高速に可能で、後に低速のボールドに保存されるということ
- コンソールからできる処理がないのでライフサイクルから使うパターンが多い
- 取り出し費用がS3より高い。保存が安い
- 取り出しはリクエスト数と容量でお金がかかる＋データ転送料金

データ取り出しタイプ（料金タイプ）

- 迅速　１分、５分くらいまでアクセス速度を早めることが可能
- プロビジョニングキャパシティ　迅速取り出しを必要な時に利用できる仕組み
- 標準　（デフォルトは３時間か５時間）
- 大容量　取り出し時間が５〜１２時間　安価　ペタバイト

アクセス管理

- IAMポリシー
- ボールドポリシー
- データ取り出しポリシー
- ボールドロックポリシー
- 署名

### S3 Glacier Deep Archive

データ取得がさらに遅くなる長期保存用ストレージタイプ

### well architected framework

- WAFホワイトペーパー
- SAまたは認定パートナーによる支援制度
- セルフチェック向けのWA Tool

Tips

- AZは２まで。３つにすると効率が悪くなる
- ２つ以上のVPCを使うべき。（開発と本番など）しかし非効率になるので適切なアーキテクチャを求められる
- 「マルチVPC方式」か「マルチアカウント方式」でVPC分割
- パブリックサブネット 10.0.1.0/24　サブネットは/24以上のサイズ推奨
- プライベートサブネット 10.0.2.0/24

Reliability

キャパシティの推測をやめる

スケーラビリティの確保　需要の変化に対応できるアーキテクチャを
設計する

環境の自動化

事業継続計画（BCP）

バックアップからの復元やフェイルオーバーを実践して検証する

高可用性

ダウンタイムを限りなく０にしていくこと

RDSのフェイルオーバーはRoute 53を利用して設定できる？

高可用性の非機能要件

- 目標復旧時間
- 目標復旧地点

- 復元可能性

Route 53からEC2へのルーティングを行っている時にElastic　IPのフローティングをしてダウン時に別のEC2にルーティングを変更できる

### ELB

- ヘルスチェック　通常は均等に分散している
- 負荷分散
- SSLサポート　セキュアな通信
- スティッキーセッション　セッション中に同じユーザーから来たリクエストをすべて同じEC2インスタンスに送信する
- Connection Draining　
- S3へのログ保管

CLB 標準的なL4/L7におけるロードバランシングが可能だが複雑な設定ができない。ドメインで分ける必要があった。
ALB　パスベースルーティングが可能になった。レイヤー７への対応が強化された。コンテナもバランシング可能。ヘルスチェック可能
NLB　L4に特化。超低遅延で高スループット。VPC外のターゲットを含めたIPや静的IPアドレスを登録可能。IP書き換えを行わない。
