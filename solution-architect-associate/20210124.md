### Redshift

- 一般的なデータウェアハウスより安いがそれでも高価
- PostgreSQL互換の列志向データモデル（データ分析目的ならアーキテクチャは列志向が良い）
- 単一AZで起動しマルチAZ不可
- S3をデータレイクとして利用できる。
- リーダーノードとコンピュートノードで構成される。
- データ格納ブロックに対してメタデータを付与して検索値とする。リーダーノードのインメモリ上にメタデータを格納する
- マテリアライズド・ビュー　頻繁に実行するクエリパターンを結合、フィルタ、集計、射影によって高速化する機能
- 機械学習によるクエリ効率化

インスタンスタイプ

- RA3　最低２ノード必要
- DC2 最低１ノード必要

運用の自動化

- Cloudwatch連動
- 自動バックアップ・自動メンテナンス・スケジューリング機能

ワークロード管理（WLM）

ロングクエリ用のキュー、ショートクエリ用のキューを自動で判別しスロットを割り当ててくれる。

スケーリング

ノード追加、クラスター追加（数秒で追加可能）

Redshift Spectrum

ユーザーが管理するS3バケットに対して直接データ解析を実行可能

データ連携

- S3　一番相性が良い
- Kinesis
- RDS 直接接続はないが、AWS Data PipelineやDMSを利用してデータ移行を実施可能
- DynamoDB
- Amazon EMR

データ連携

- Amazon Quicksight
- S3 Unloadコマンドを使ってロードできる
- Amazon Machine Learning
- RDS PostgreSQLの機能を利用して連携可能

### AWS Glue

ETLを行う完全マネージド型のサービス

### AWS Lake Formation

データレイク構成を簡単に素早く実現するサービス

### Amazon EMR

Apache Spark, Apache Hive, Prestoなどビックデータフレームワークを利用してデータ処理する。


### ElastiCache

- フルマネージド型
- memocached, redisの２種類のエンジンから利用可能
- ユースケース　データの即時反映が必要な場合、pub/subを使うチャット機能

memocached

- シンプル
- マルチスレッド

redis

- シングルスレッド
- 複雑なデータ型が必要
- pub/subが必要
- Luaスクリプト
- 位置情報クエリ

### Cloudfront

- WAF/Certificate Managerと連携可
- 210以上のエッジロケーション
- 現在はオリジン→リージョナルエッジキャッシュ→エッジロケーションの３重構成
- 使用量が最大40Gbps/10万RPS超は上限緩和申請をする必要がある
- Adobeメディアを利用する場合のみRTMPディストリビューションを使うが、それ以外がWEBディストリビューション。
- Http1.0/1.1/2に対応
- Apple Http live streaming(HLS)やMicrosoft Smooth streamingなどにも対応
- Gzip圧縮で高速化
- 単一ファイルのキャッシュは最大２０GB
- AWS Shieldのスタンダード版がデフォルトで付き、DDoS攻撃を棒業する。

### SQS

直接通信だと受信側がBusyの場合に困る。受信側が都合の良い時にポーリングして処理することを許せる。

- フルマネージド型
- 256KBまでの軽いデータしｃ利用できない。６０秒から１４日間のメッセージ保持期間がある。Extended Client Libraryを利用すると2GBまでのメッセージの送受信が可能
- デフォルトは標準キューで、FIFOを選ぶことも可能
- 標準キュー　なるべく順番通りにこなす。複数回受信してしまうこともある。
- FIFOは厳密に順番を守る

ポーリングの種類

- Short Poling キューがからの場合に即時リターンする
- Logn Poling キューが空の場合にタイムアウトまで待つ
- デッドレターキュー ずっと残ったメッセージを別キューに移動し、正常に処理できなかったメッセージを隔離できる。
- Visibility Timeout 受信インスタンスを指定することが可能。他インスタンスに新しいメッセージをタイムアウトまで見えなくする。重複処理の防止になる。

### SNS

- フルマネージド型のPUSH型サービス
- メッセージ通信順番は保証されない。
- 配信ポリシーによって再試行可能
- メッセージサイズは最大256KB
- 取り消し不可

**SNS vs SQS**

- SNS　メッセージは永続でない　SQS　永続性あり
- SNS　プッシュ型で一方通行　SQS　ポーリング配信方式
- SNS　プロデューサーが発行してコンシューマーがサブスクライブする　SQS　プロデューサー、コンシューマー双方が送受信

### SES

- バウンス処理可能
- Http Rest apiかSMTPエンドポイントから送信する

### Lambda

サービス指向アーキテクチャ

年金システムであれば給付サービス、徴収サービス、適用サービスなど、一通りの機能が揃った大きなサービス単位でコンポーネントを分割する設計方式。アプリケーションをコンポーネント化して、通信プロトコルで連携

マイクロサービス

SOAより小さな機能単位のプロセスでサービス化した構成。

- ブループリント　サンプルコード集
- pushモデル。サービスもしくはアプリが実行する。順不同、３回までリトライ
- pullモデル。DynamoDBとKinesisのデータ処理はLambdaを直接的にイベント発行しないため、Lammbdaがポーリングを行い、自らイベントを取得。ストリームに入ってきた順に処理される。データが期限切れになるまでリトライ。イベントソースとして登録したストリームに対してlambdaが自動的にデータ取得の関数を実行する。

- 非同期実行　リクエストが正常に受け取られたというレスポンス
- 同期実行　実行結果のレスポンス

パーミッション

- Execution Lambdaがどのリソースを動かせるのか決める
- Invocation 外部からlambdaを発火できるリソースを指定する

バージョン

- 作成や更新時にバージョンが発行される。
- エイリアスをつけて番号より明示的にネーミングできる

VPCアクセス

Elastic Network Interface (ENI)を利用してアクセス可能。サブネットのIPがDHCPで動的に割り当てられる。

### OpsWorks

- Chef運用できるマネージドサービス
- Elastic BeanstalkはWEBアプリケーションに特化している。デプロイとスケーリングなど


### CloudFormation

AWSの全インフラを記述してデプロイ、管理できる。

- 変更セット　影響度を確認するためのスタック
- ドリフト　差分を検出する機能
- スタックセット　複数のAWSアカウントと複数のリージョンに対してスタックを作成できる機能
- スタック間のリソース参照機能　参照値をエクスポートして連携できる。

### EKS

K8sと完全互換性があり、既存のものがあれば簡単に適用できる。
